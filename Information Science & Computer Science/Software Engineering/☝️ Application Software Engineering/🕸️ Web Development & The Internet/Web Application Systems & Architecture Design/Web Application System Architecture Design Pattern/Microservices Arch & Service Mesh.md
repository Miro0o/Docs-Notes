# Microservices Arch & Service Mesh

[TOC]



## Res
### Related Topics
↗ [Distributed Computing & Systems](../../../../../🧠%20Computing%20Methodologies/Distributed%20Computing%20&%20Systems/Distributed%20Computing%20&%20Systems.md)

↗ [APIs & Interfaces in Web Development](../../👬%20APIs%20&%20Interfaces%20in%20Web%20Development/APIs%20&%20Interfaces%20in%20Web%20Development.md)
↗ [Orchestration & Management](../../../../☁️%20Cloud%20Computing%20&%20Cloud%20Native/Cloud%20Operating%20System%20&%20Platform%20(System%20Level%20Engineering)/Orchestration%20&%20Management/Orchestration%20&%20Management.md)
- ↗ [Service Mesh](../../../../☁️%20Cloud%20Computing%20&%20Cloud%20Native/Cloud%20Operating%20System%20&%20Platform%20(System%20Level%20Engineering)/Orchestration%20&%20Management/Service%20Mesh/Service%20Mesh.md)

↗ [Spring Cloud](../../../../../🔑%20CS%20Core/👩‍💻%20Computer%20Languages%20&%20Programming%20Methodology/🛠️%20Programming%20Tool%20Chain/🚠%20Application%20Runtimes%20&%20SDKs/Java%20Runtimes%20(JRE%20&%20JDKs%20Tools)/📌%20JAVA%20Third-party%20Libraries%20&%20JDK/Java%20Web%20Backend/Spring%20Framework/Spring%20Cloud/Spring%20Cloud.md)
↗ [Kubernetes (K8S)](../../../../☁️%20Cloud%20Computing%20&%20Cloud%20Native/Cloud%20Operating%20System%20&%20Platform%20(System%20Level%20Engineering)/Orchestration%20&%20Management/Cluster%20Scheduling%20&%20Orchestration/🏗️%20Kubernetes%20(K8S)/Kubernetes%20(K8S).md)



## Intro
> 🔗 https://en.wikipedia.org/wiki/Microservices

In software engineering, a **microservice** architecture is an [architectural pattern](https://en.wikipedia.org/wiki/Architectural_pattern "Architectural pattern") that organizes an application into ==a collection of loosely coupled, fine-grained services that communicate through lightweight protocols.== This pattern is characterized by the ability to develop and deploy services independently, improving modularity, scalability, and adaptability. However, it introduces additional complexity, particularly in managing distributed systems and inter-service communication, making the initial implementation more challenging compared to a [monolithic architecture](https://en.wikipedia.org/wiki/Monolithic_application "Monolithic application").

> 🔗 https://zh.wikipedia.org/zh-hans/%E5%BE%AE%E6%9C%8D%E5%8B%99

实现微服务体系结构非常困难。任何微服务体系结构都需要解决许多问题（见下表）。Netflix开发了一个微服务框架来支持他们的内部应用程序，然后开放了[5]该框架的许多部分。其中许多工具已经通过Spring框架得到推广——它们已经在Spring Cloud项目的保护伞下重新实现为基于Spring的工具。[6] 下表显示了Kubernetes生态系统中的实现功能与Spring Cloud世界中的等效功能的比较。[7] Spring Cloud生态系统值得注意的一点是，它们都是基于Java的技术，而Kubernetes是一个多语言运行时平台。

|                                                 微服务架构                                                  |                                                                                    Spring Cloud与Netflix OSS                                                                                     |                                                                                                                    Kubernetes                                                                                                                     |
| :----------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|                              配置管理：微服务应用程序的配置需要从代码中进行外部化，并可以通过简单的服务调用进行检索。                              |                                                             Spring Config Server、Netflix Archaius都支持基于Git存储库的配置位置。Archaius支持配置数据类型。                                                             |                                                                            Kubernetes ConfigMaps通过服务公开存储在etcd中的配置。 Kubernetes Secrets支持基于服务的安全部署和敏感配置信息（例如密码，证书等）的使用。                                                                             |
| [服务发现](https://zh.wikipedia.org/wiki/%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0 "服务发现")：维护微服务域中可用于工作的服务实例列表。 |                                                              Spring Cloud Eureka允许客户端向其注册，与注册的客户端保持心跳，并将服务名称映射到按服务名称查找服务的客户端的主机名。                                                               |                                                                                    Kubernetes Services提供集群内部可用的服务实例的部署时注册。Ingress是一种机制，通过这种机制，服务可以向集群之外的客户端公开。                                                                                    |
|                          负载平衡：扩展分布式系统的关键是能够运行一个组件的多个实例。然后要通过负载均衡器将负载分配到这些实例上。                          |                                                                            Spring Cloud Ribbon为服务客户端提供跨服务实例负载平衡的能力。                                                                             |                                                                                              Kubernetes Service提供了跨服务实例对服务进行负载平衡的能力。这与Ribbon提供的功能不同。                                                                                              |
|                  API网关：微服务提供的API的粒度通常与服务客户端需要的粒度不同。API网关实现表层，并提供其他服务，如代理、协议转换和其他管理功能。                  |                                                                                  Spring Cloud Zuul提供基于配置的API表层                                                                                  |                                                                         Kubernetes Service和Ingress resources、Istio、Ambassador是提供南北（进出数据中心）和东西（跨数据中心或云或地区的通信）API网关功能的解决方案。                                                                         |
|              安全问题：许多安全问题推给API网关来实现。对于分布式微服务应用程序，不重新造安全方面的轮子，允许在所有服务共享的组件中进行策略定义和实现是有意义的。               |                                                                        Spring Cloud Security通过Spring Cloud Zuul解决了许多安全问题                                                                        |                                                                                               Kubernetes生态系统提供了像Istio这样的服务网格，该网格能够通过其API网关机制提供安全性。                                                                                                |
|                       集中化日志记录：拥有一个集中化的日志收集和分析基础设施来管理大量的服务非常重要——其中许多服务是以分布式方式运行的。                       | ELK技术栈（[Elasticsearch](https://zh.wikipedia.org/wiki/Elasticsearch "Elasticsearch")、LogStash、[Kibana](https://zh.wikipedia.org/w/index.php?title=Kibana&action=edit&redlink=1 "Kibana（页面不存在）")） | EFK技术栈（[Elasticsearch](https://zh.wikipedia.org/wiki/Elasticsearch "Elasticsearch")、[Fluentd](https://zh.wikipedia.org/wiki/Fluentd "Fluentd")、[Kibana](https://zh.wikipedia.org/w/index.php?title=Kibana&action=edit&redlink=1 "Kibana（页面不存在）")） |
|                             集中的度量：一个可以监控单个服务和整个系统的健康和性能的集中区域对于正确的操作是必不可少的。                             |                                                                                    Spring Spectator & Atlas                                                                                     |                                                                                Heapster, Prometheus, & [Grafana](https://zh.wikipedia.org/wiki/Grafana "Grafana")                                                                                 |
|             分布式跟踪：每个进程的日志记录和度量监视都有其存在的地方，但它们都不能重构事务在跨分布式系统传播时所采用的复杂路径。分布式跟踪是微服务平台必不可少的工具。              |                                                                                       Spring Cloud Sleuth                                                                                       |                                                                           Hawkular, [Jaeger](https://zh.wikipedia.org/wiki/Linux%E5%9F%BA%E9%87%91%E6%9C%83 "Linux基金会")                                                                           |
|                           弹性和容错性：分布式系统必须能够围绕故障进行自动路由，并且能够将请求路由到提供最佳响应的服务实例。                            |                                                                                Spring Hystrix, Turbine, & Ribbon                                                                                |                                             Health check, [service meshes](https://zh.wikipedia.org/w/index.php?title=Service_meshes&action=edit&redlink=1 "Service meshes（页面不存在）") (example: Istio)                                              |
|               自动伸缩和自我修复：分布式系统通过水平伸缩响应更高的负载: 平台必须检测并自动响应这些条件。此外，系统需要检测故障，并尝试自动重启，无需操作员输入。               |                                                                                                -                                                                                                |                                                                                                                  健康检查、自我修复和自动缩放                                                                                                                   |
|        打包、部署和调度: 大规模系统需要健壮的包管理和部署系统来管理滚动部署或蓝绿色部署，并在必要时进行回滚。调度程序帮助确定可以根据当前条件将一组新服务部署到哪个特定的执行节点。         |                                                                       Spring Boot, Apache Maven. Spring Cloud系统没有真正的调度程序。                                                                       |                                                                                               Docker, Rkt, Kubernetes Scheduler & Deployment, Helm                                                                                                |
|                                          作业管理：控制无人值守的后台程序执行。                                           |                                                                                          Spring Batch                                                                                           |                                                                                                          Kubernetes Jobs与Scheduled Jobs                                                                                                           |
|                                    单例应用程序：限制特定服务作为该服务在整个系统中的唯一实例运行。                                    |                                                                                      Spring Cloud Cluster                                                                                       |                                                                                                                  Kubernetes Pods                                                                                                                  |



## Ref
